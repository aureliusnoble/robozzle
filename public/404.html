<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RoboZZle</title>
    <script>
      // Single Page App routing workaround for GitHub Pages
      // Redirects 404s back to index.html with the path preserved in sessionStorage
      // See: https://github.com/rafgraph/spa-github-pages
      (function() {
        // App is deployed at /robozzle/, so keep 1 path segment
        var pathSegmentsToKeep = 1;

        var l = window.location;
        var path = l.pathname.split('/').slice(pathSegmentsToKeep + 1).join('/');
        var search = l.search;
        var hash = l.hash;

        // Store the path in sessionStorage for the main app to read
        if (path || search || hash) {
          sessionStorage.setItem('spa-redirect', JSON.stringify({
            path: '/' + path,
            search: search,
            hash: hash
          }));
        }

        // Redirect to /robozzle/
        var redirectUrl = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + '/robozzle/';

        l.replace(redirectUrl);
      })();
    </script>
  </head>
  <body>
    <noscript>
      <p>JavaScript is required to use RoboZZle.</p>
      <p><a href="/">Go to homepage</a></p>
    </noscript>
  </body>
</html>
